<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="chart">
	<select id="countDailySales" resultType="_int">
		select
		    nvl(sum(i.amount),0) sum
		from
		    imp i left join merchant m
		        on i.merchant_uid = m.merchant_uid
		where
		    i.is_canceled = 0 and
		    trunc(m.order_date) = trunc(sysdate)
	</select>
	<select id="countMonthlySales" resultType="_int">
		select
		    nvl(sum(i.amount),0) sum
		from
		    imp i left join merchant m
		        on i.merchant_uid = m.merchant_uid
		where
		    i.is_canceled = 0 and
		    extract(month from m.order_date) = extract(month from sysdate)
	</select>
	<select id="countMembers" resultType="_int">
		select
		    count(*) cnt
		from
		    member
	</select>
	<select id="countTodayMembers" resultType="_int">
		select
		    nvl(count(*),0) cnt
		from
		    member
		where
		    trunc(enroll_date) = trunc(sysdate)
	</select>
	<select id="countBlacklist" resultType="_int">
		select
		    nvl(count(*),0) cnt
		from
		    member
		where
		    black_yn = 'Y'
	</select>
	<select id="countQuestionProduct" resultType="_int">
		select
		    count(*) cnt
		from
		    question_product
		where
		    question_ref_no is null
	</select>
	<select id="countCommunities" resultType="_int">
		select
		    count(*) cnt
		from
		    community
		where
		    extract(year from enroll_date) = extract(year from sysdate)
	</select>
</mapper>